# 传奇MUD游戏

基于传奇2题材的纯文字MUD网页游戏。

## 快速开始

### 1. 启动数据库
```bash
docker-compose up -d
```

### 2. 安装依赖
```bash
pip install -r requirements.txt
```

### 3. 运行数据库迁移（可选）
如果是首次运行或需要更新数据库结构：
```bash
# 手动执行SQL迁移文件
psql -h localhost -U mud_user -d mud_game < database/migrations/001_add_skill_proficiency.sql
```

### 4. 运行服务器
```bash
python -m backend.main
```

### 5. 访问游戏
打开浏览器访问 http://localhost:8000

## 功能特性

### 已实现功能

#### 基础系统
- 用户注册/登录（JWT认证）
- 角色创建（战士/法师/道士）
- WebSocket实时通信
- 世界聊天

#### 地图系统
- **24x24随机迷宫生成**（已优化）
- **智能视野迷雾系统**（已修复）
  - 未探索区域不可直接通行
  - 阴影区域需要探索后才能移动
- A*寻路算法验证路径可达性
- 点击移动
- **多地图入口选择**（已完善）
- 地图切换（沃玛、僵尸洞、猪洞、祖玛等16+地图）
- 一键回城
- **怪物只刷新在可到达位置**（已修复）

#### 战斗系统
- PVE回合制战斗
- 战斗日志逐条播放
- 经验/金币/物品掉落
- **怪物定时自动刷新**（已修复）
- Boss系统
- **怪物伤害类型**（物理/魔法）
- **装备特效系统**（已实现）
- **套装系统**（11套职业套装）

#### 装备特效系统
装备可拥有以下特效属性，特效计算已封装在 `backend/game/effects.py` 模块中：

| 特效 | 说明 | 示例 |
|------|------|------|
| `double_attack` | 双次攻击几率 | 0.1 = 10%几率触发 |
| `hit_rate` | 命中率加成 | 0.05 = +5%命中 |
| `dodge_rate` | 闪避率加成 | 0.08 = +8%闪避 |
| `crush_rate` | 压碎几率（1.5倍伤害） | 0.1 = 10%几率 |
| `lifesteal` | 吸血比例 | 0.1 = 吸取10%伤害 |
| `reflect` | 反弹伤害比例 | 0.05 = 反弹5%伤害 |
| `hp_on_hit` | 击中回复HP | 5 = 每次攻击+5HP |
| `mp_on_hit` | 击中回复MP | 3 = 每次攻击+3MP |
| `block_rate` | 格挡几率 | 0.1 = 10%几率格挡 |
| `block_amount` | 格挡伤害比例 | 0.4 = 格挡40%伤害 |
| `extra_phys` | 附加物理伤害 | 10 = +10物理伤害 |
| `extra_magic` | 附加魔法伤害 | 15 = +15魔法伤害 |
| `damage_reduction` | 减伤比例 | 0.1 = 减少10%伤害 |
| `stun_rate` | 眩晕几率 | 0.05 = 5%几率眩晕 |
| `splash_rate` | 溅射伤害比例 | 0.2 = 20%伤害溅射 |
| `poison_damage` | 毒伤每回合 | 10 = 每回合10毒伤 |
| `poison_rounds` | 毒伤持续回合 | 3 = 持续3回合 |
| `ignore_defense` | 忽略防御比例 | 0.15 = 忽略15%防御 |
| `ignore_magic_def` | 忽略魔御比例 | 0.1 = 忽略10%魔御 |
| `crit_rate` | 暴击率加成 | 0.1 = +10%暴击率 |
| `crit_damage` | 暴击伤害加成 | 0.5 = +50%暴击伤害 |

#### 物品系统
- 5种品质（白/绿/蓝/紫/红）
- **200格背包 + 1000格仓库**（显示可用空间）
- **完整装备系统**（10个装备槽位）
  - 武器、头盔、衣服、腰带、鞋子
  - 项链、左右戒指、左右手镯
- **综合属性面板**（显示装备加成后的属性）
- 装备穿戴和卸下
- 物品回收（金币/元宝）
- **完整的装备和物品数据**（已补充）
- **装备特效属性**（已添加）
- **套装装备**（Boss掉落）

#### 套装系统（新增）
11套职业套装，分为T0-T3四个等级：

| 等级 | 套装 | 职业 | 等级需求 | 2件加成 | 4件加成 |
|------|------|------|----------|---------|---------|
| T0 | 野性套装 | 战士/道士 | 15 | HP+30,防御+3,攻击+3 | HP+60,防御+8,攻击+8,命中+3% |
| T0 | 魔导套装 | 法师 | 15 | MP+50,魔御+4,魔法+5 | MP+100,魔御+10,魔法+12,暴击+3% |
| T1 | 熔火套装 | 战士 | 30 | HP+80,防御+8,攻击+8 | HP+160,防御+18,攻击+18,反弹+5%,格挡+5% |
| T1 | 奥术套装 | 法师 | 30 | MP+100,魔御+10,魔法+12 | MP+200,魔御+22,魔法+28,暴击+5%,暴伤+15% |
| T1 | 塞纳里奥套装 | 道士 | 30 | HP+50,MP+45,攻魔+5 | HP+100,MP+90,攻魔+12,吸血+3%,击回HP+5 |
| T2 | 龙鳞套装 | 战士 | 45 | HP+150,防御+15,攻击+15 | HP+300,防御+35,攻击+35,压碎+8%,格挡+8% |
| T2 | 灵风套装 | 法师 | 45 | MP+180,魔御+18,魔法+22 | MP+360,魔御+40,魔法+50,暴击+8%,穿魔御+10% |
| T2 | 碎地套装 | 道士 | 45 | HP+100,MP+85,攻魔+10 | HP+200,MP+170,攻魔+22,吸血+5%,击回MP+8,毒伤+3 |
| T3 | 冰冠套装 | 战士 | 60 | HP+280,防御+30,攻击+30 | HP+560,防御+65,攻击+65,压碎+12%,反弹+10%,眩晕+8% |
| T3 | 暗影套装 | 法师 | 60 | MP+320,魔御+35,魔法+40 | MP+640,魔御+75,魔法+90,暴击+12%,暴伤+30%,双击+5% |
| T3 | 巫妖套装 | 道士 | 60 | HP+200,MP+170,攻魔+18 | HP+400,MP+340,攻魔+40,吸血+8%,毒伤+5,减伤+8% |

#### 副本系统（新增）
10大经典副本，每个副本掉落专属套装和散件：

| 副本 | 等级需求 | Boss | 套装等级 | 特色掉落 |
|------|----------|------|----------|----------|
| 安其拉废墟 | 50 | 拉贾克斯 | T4 | 昆虫套装、自然抗性装备 |
| 安其拉神殿 | 60 | 克苏恩 | T5 | 其拉套装、橙装材料 |
| 卡拉赞 | 70 | 麦迪文之影 | T4 | 奥术套装、法杖 |
| 格鲁尔的巢穴 | 70 | 格鲁尔 | T4 | 龙鳞套装、力量装备 |
| 玛瑟里顿的巢穴 | 70 | 玛瑟里顿 | T4 | 深渊套装、恶魔装备 |
| 毒蛇神殿 | 70 | 瓦丝琪 | T5 | 潮汐套装、水下装备 |
| 黑暗神殿 | 70 | 伊利丹 | T6 | 影魔套装、双刀 |
| 海加尔山之战 | 70 | 阿克蒙德 | T6 | 怒火套装、橙装材料 |
| 风暴要塞 | 70 | 凯尔萨斯 | T5 | 凤凰套装、传奇武器 |
| 太阳之井高地 | 70 | 基尔加丹 | T6 | 日怒套装、橙装材料 |

#### 副本套装系统（T4-T6）
每个副本掉落物理和魔法两套套装，共20套高级套装：

| 等级 | 套装 | 职业 | 副本 | 2件加成 | 4件加成 |
|------|------|------|------|---------|---------|
| T4 | 昆虫战甲 | 战士 | 安其拉废墟 | HP+200,防御+25,攻击+20 | HP+400,防御+55,攻击+45,格挡+10%,反弹+8% |
| T4 | 昆虫法袍 | 法师 | 安其拉废墟 | MP+250,魔御+28,魔法+30 | MP+500,魔御+60,魔法+70,暴击+10%,穿魔御+15% |
| T4 | 奥术战铠 | 战士 | 卡拉赞 | HP+220,防御+28,攻击+22 | HP+440,防御+60,攻击+50,压碎+10%,命中+8% |
| T4 | 奥术秘法 | 法师 | 卡拉赞 | MP+280,魔御+30,魔法+35 | MP+560,魔御+65,魔法+80,暴击+12%,暴伤+25% |
| T4 | 龙鳞重甲 | 战士 | 格鲁尔 | HP+240,防御+30,攻击+25 | HP+480,防御+65,攻击+55,压碎+12%,减伤+10% |
| T4 | 深渊战甲 | 战士 | 玛瑟里顿 | HP+230,防御+28,攻击+23 | HP+460,防御+62,攻击+52,反弹+12%,吸血+5% |
| T4 | 深渊魔纹 | 法师 | 玛瑟里顿 | MP+270,魔御+30,魔法+33 | MP+540,魔御+65,魔法+75,暴击+11%,附魔伤+20 |
| T5 | 其拉战甲 | 战士 | 安其拉神殿 | HP+300,防御+40,攻击+35 | HP+600,防御+85,攻击+75,格挡+15%,眩晕+10% |
| T5 | 其拉法袍 | 法师 | 安其拉神殿 | MP+380,魔御+45,魔法+50 | MP+760,魔御+95,魔法+110,暴击+15%,双击+8% |
| T5 | 潮汐战铠 | 战士 | 毒蛇神殿 | HP+320,防御+42,攻击+38 | HP+640,防御+90,攻击+80,压碎+15%,击回HP+15 |
| T5 | 潮汐秘法 | 法师 | 毒蛇神殿 | MP+400,魔御+48,魔法+55 | MP+800,魔御+100,魔法+120,暴击+16%,穿魔御+20% |
| T5 | 凤凰战甲 | 战士 | 风暴要塞 | HP+340,防御+45,攻击+40 | HP+680,防御+95,攻击+85,反弹+15%,闪避+10% |
| T5 | 凤凰法袍 | 法师 | 风暴要塞 | MP+420,魔御+50,魔法+58 | MP+840,魔御+105,魔法+130,暴击+18%,暴伤+40% |
| T6 | 影魔战铠 | 战士 | 黑暗神殿 | HP+400,防御+55,攻击+50 | HP+800,防御+115,攻击+105,压碎+18%,吸血+10% |
| T6 | 影魔法袍 | 法师 | 黑暗神殿 | MP+500,魔御+60,魔法+70 | MP+1000,魔御+125,魔法+155,暴击+20%,双击+12% |
| T6 | 怒火战甲 | 战士 | 海加尔山 | HP+420,防御+58,攻击+52 | HP+840,防御+120,攻击+110,格挡+20%,减伤+15% |
| T6 | 怒火法袍 | 法师 | 海加尔山 | MP+520,魔御+62,魔法+72 | MP+1040,魔御+130,魔法+160,暴击+22%,穿魔御+25% |
| T6 | 日怒战铠 | 战士 | 太阳之井 | HP+450,防御+60,攻击+55 | HP+900,防御+130,攻击+120,压碎+20%,反弹+18% |
| T6 | 日怒秘法 | 法师 | 太阳之井 | MP+550,魔御+65,魔法+75 | MP+1100,魔御+135,魔法+170,暴击+25%,暴伤+50% |

#### 橙装神器系统（新增）
8件传说级橙装，拥有远超套装的强大属性和独特特效：

| 橙装 | 类型 | 职业 | 掉落 | 基础属性 | 特殊效果 |
|------|------|------|------|----------|----------|
| 雷霆之怒·逐风者的祝福之剑 | 单手剑 | 战士 | 熔火之心 | 攻击80-150,HP+500,防御+50 | 攻击触发连锁闪电(300伤害),暴击+15%,压碎+20%,双击+15% |
| 萨弗拉斯·炎魔拉格纳罗斯之手 | 双手剑 | 战士 | 熔火之心 | 攻击120-200,HP+600,攻击+80 | 攻击附带火焰伤害(50),溅射+30%,忽略防御+25%,击回HP+20 |
| 埃辛诺斯战刃 | 双刀 | 战士/道士 | 黑暗神殿 | 攻击70-130,攻击+60,闪避+15% | 双持攻速+30%,吸血+15%,暴击+18%,双击+20% |
| 索利达尔·群星之怒 | 法杖 | 法师 | 太阳之井 | 魔法120-180,MP+800,魔御+80 | 法术伤害+25%,暴击+20%,暴伤+60%,穿魔御+30%,击回MP+30 |
| 瓦兰奈尔·远古王者之锤 | 单手锤 | 道士 | 奥杜尔 | 攻魔60-100,HP+400,MP+400 | 治疗效果+40%,吸血+12%,击回HP+25,击回MP+20,减伤+15% |
| 影之哀伤 | 双手剑 | 战士 | 冰冠堡垒 | 攻击150-250,HP+700,攻击+100 | 攻击吸取灵魂(+50伤害),压碎+25%,吸血+18%,眩晕+15% |
| 巨龙之怒·泰蕾苟萨的寄魂杖 | 法杖 | 法师 | 永恒之眼 | 魔法140-200,MP+900,魔法+120 | 法术伤害+30%,暴击+25%,双击+15%,溅射+25%,附魔伤+50 |
| 龙父之牙 | 匕首 | 道士 | 黑翼之巢 | 攻击50-90,攻击+50,闪避+20% | 毒伤+15(5回合),攻速+40%,暴击+20%,忽略防御+20% |

#### 品质系统
品质影响装备属性和特效强度，配置在 `data/config/quality.json`：

| 品质 | 属性加成 | 特效加成 | 掉落权重 |
|------|----------|----------|----------|
| 白色（普通） | 1.0x | 0% | 50 |
| 绿色（优秀） | 1.1x | +10% | 30 |
| 蓝色（精良） | 1.25x | +20% | 15 |
| 紫色（史诗） | 1.5x | +35% | 4 |
| 红色（传说） | 2.0x | +50% | 1 |

#### 技能系统
- 三职业技能树
- **技能面板优化**（完整显示所有技能）
- **已学习/未学习区域分离**（已改进）
- **技能熟练度系统（0-1000，每1000升1级）**（已实现）
- 基础技能商店购买
- 高级技能怪物掉落
- 技能等级上限3级
- 技能描述和属性完整显示

#### PVP系统
- 野外自由PK
- 红名系统
- 死亡掉落
- **装备特效支持**（已添加）

#### 行会系统
- 创建行会
- 行会成员管理
- 行会聊天

#### 角色成长系统
- **职业差异化成长**（已强化）
  - 战士：每级+25HP/+5MP/+4攻击/+3防御
  - 法师：每级+10HP/+20MP/+5攻击/+1防御
  - 道士：每级+15HP/+15MP/+3攻击/+2防御
- **升级经验指数增长**（难度渐进）
- 每10级额外+1幸运值
- 升级自动满血满蓝
- 装备属性加成系统
- 品质影响装备属性

#### 充值系统
- 元宝充值（模拟）
- VIP等级
- 元宝商城

## 技术栈

- 后端: Python 3.11+ / FastAPI / WebSocket
- 数据库: PostgreSQL + Redis
- 前端: HTML + CSS + JavaScript + Canvas
- 响应式设计: 支持手机/平板/桌面端

## 项目结构

```
mud-legend/
├── backend/
│   ├── main.py              # FastAPI入口
│   ├── config.py            # 配置
│   ├── database.py          # 数据库连接
│   ├── auth.py              # JWT认证
│   ├── schemas.py           # Pydantic模型
│   ├── models/              # 数据库模型
│   │   ├── character.py     # 角色模型
│   │   ├── inventory.py     # 物品/技能模型
│   │   └── ...
│   ├── game/                # 游戏逻辑
│   │   ├── engine.py        # 游戏引擎
│   │   ├── combat.py        # 战斗系统（支持特效）
│   │   ├── effects.py       # 装备特效计算模块（新增）
│   │   ├── map_manager.py   # 地图管理
│   │   ├── maze.py          # 迷宫生成
│   │   ├── pvp.py           # PVP系统
│   │   ├── spawner.py       # 怪物刷新
│   │   └── data_loader.py   # 数据加载
│   ├── api/
│   │   └── recharge.py      # 充值API
│   └── websocket/
│       └── manager.py       # WebSocket管理
├── frontend/
│   ├── index.html
│   ├── css/style.css
│   └── js/game.js
├── data/                    # 游戏配置数据
│   ├── maps/
│   │   └── maps.json        # 地图配置（含多入口）
│   ├── monsters/
│   │   └── monsters.json    # 怪物数据（含伤害类型）
│   ├── items/
│   │   ├── weapons.json     # 武器数据（含特效）
│   │   ├── armors.json      # 防具数据（含特效）
│   │   ├── accessories.json # 饰品数据（含特效）
│   │   ├── consumables.json # 消耗品数据
│   │   └── set_items.json   # 套装装备数据
│   ├── skills/
│   │   ├── warrior.json     # 战士技能
│   │   ├── mage.json        # 法师技能
│   │   └── taoist.json      # 道士技能
│   ├── npcs/
│   │   └── shops.json       # 商店NPC
│   └── config/
│       ├── quality.json     # 品质配置（含特效加成）
│       ├── sets.json        # 套装配置
│       └── drop_groups.json # 掉落组配置
├── database/
│   └── migrations/          # 数据库迁移文件
│       └── 001_add_skill_proficiency.sql
├── plans/
│   └── mud-game-plan.md     # 设计文档
├── requirements.txt
├── docker-compose.yml
└── README.md
```

## 游戏指南

### 职业选择
- **战士**: 高血量高防御，近战物理输出，适合格挡/反弹装备
- **法师**: 低血量高魔法，远程魔法输出，适合溅射/暴击装备
- **道士**: 平衡型，可治疗可召唤，适合吸血/毒伤装备

### 地图
- **主城（比奇省）**: 安全区，所有NPC，多个地图入口可选
- **沃玛森林** → 沃玛寺庙1-3层（沃玛教主）
- **僵尸洞1-3层**（尸王）
- **蜈蚣洞1-2层**

### 操作
- 点击地图格子移动（24x24格子）
- 点击怪物攻击
- 到达入口可选择进入对应地图
- 技能界面显示已学习和未学习技能
- 使用技能可增加熟练度，满1000升级

### 技能系统
- 学习技能后自动显示在"已学习"区域
- 每个技能最高3级
- 通过使用技能增加熟练度（每次+10）
- 熟练度达到1000自动升级

### 装备特效
- 高级装备拥有特殊效果
- 品质越高，特效越强
- 多件装备的特效可叠加
- 战斗中自动触发特效

### 套装系统
- 收集同一套装的装备可激活套装加成
- 2件激活第一阶段加成
- 4件激活第二阶段加成（包含第一阶段）
- 套装装备从Boss掉落
- 装备面板显示已激活的套装效果

## 配置说明

所有游戏数据都在 `data/` 目录下的JSON文件中，可自由修改：

- `maps/maps.json` - 地图配置（含入口设置）
- `monsters/monsters.json` - 怪物属性（含伤害类型）
- `items/*.json` - 物品属性（武器、防具、饰品、消耗品，含特效）
- `skills/*.json` - 技能属性（战士、法师、道士）
- `config/quality.json` - 品质配置（含特效加成）
- `config/game_config.json` - 游戏全局配置（经验倍率、爆率倍率等）

### 全局倍率配置

在 `data/config/game_config.json` 中可以调整游戏倍率：

```json
{
  "exp_multiplier": 5.0,        // 经验倍率（当前5倍）
  "drop_rate_multiplier": 5.0,  // 爆率倍率（当前5倍）
  "gold_multiplier": 1.0         // 金币倍率（当前1倍）
}
```

修改后重启服务器即可生效。

### 装备特效配置示例
```json
{
  "dragon_sword": {
    "name": "龙纹剑",
    "type": "weapon",
    "attack_min": 25,
    "attack_max": 45,
    "effects": {
      "crit_rate": 0.05,
      "double_attack": 0.08,
      "extra_phys": 5
    }
  }
}
```

### 怪物伤害类型配置
```json
{
  "zombie_mage": {
    "name": "僵尸法师",
    "damage_type": "magic",
    "attack": 35
  }
}
```

## 最近更新

### v1.5.1 (2026-01-09) - Bug修复与功能优化
- ✅ **修复专属物品无法使用的问题**
  - 背包中的Boss召唤物品（如沃玛号角、祖玛碎片等）现在显示"使用"按钮
  - 点击使用后直接进入Boss战斗
- ✅ **修复药品只使用1次的问题**
  - 战斗中药品现在可以根据堆叠数量多次使用
  - 正确消耗使用的药品数量
- ✅ **地图刷新按钮**
  - 地图名称旁添加刷新按钮
  - 点击可刷新当前地图状态

### v1.5.0 (2026-01-08) - 套装系统
- ✅ **套装系统**
  - 11套职业套装（T0-T3）
  - 2件/4件套装加成
  - 套装提供属性和特效加成
  - 装备面板显示激活的套装效果
  
- ✅ **套装装备**
  - 44件套装装备（每套4件）
  - Boss掉落套装装备
  - 套装装备带有set_id标识

### v1.4.0 (2026-01-08) - 装备特效系统
- ✅ **装备特效系统**
  - 新增20+种装备特效
  - 双次攻击、压碎、吸血、反弹
  - 命中、闪避、格挡、减伤
  - 附伤、毒伤、眩晕、溅射
  - 忽略防御/魔御、暴击率/伤害
  - 击中回复HP/MP
  
- ✅ **特效计算模块**
  - 封装在 `backend/game/effects.py`
  - 可配置的特效参数
  - 品质加成系统
  
- ✅ **怪物伤害类型**
  - 物理伤害怪物
  - 魔法伤害怪物
  - 影响防御计算
  
- ✅ **装备数据更新**
  - 武器添加攻击特效
  - 防具添加防御特效
  - 饰品添加辅助特效
  
- ✅ **品质系统增强**
  - 品质影响特效强度
  - 可配置的掉落权重

### v1.3.2 (2026-01-05) - 移动端适配
- ✅ **响应式布局**
  - 手机端自适应地图尺寸
  - 游戏界面纵向排列
  - 弹窗自适应屏幕宽度
  - 背包网格3列显示
  - 技能面板优化布局

### v1.3.1 (2026-01-04) - 地图系统重构
- ✅ **彻底重写地图生成系统**
  - 改用开放式地图生成（约70%通路，30%墙壁）
  - 保证从入口到出口有明确且宽敞的通路
  - 移除了导致孤立区域的递归回溯算法
  - 入口和出口周围3x3区域强制清空
  
- ✅ **怪物刷新系统优化**
  - 简化刷新逻辑，移除A*验证（性能优化）
  - 只在有2个以上相邻通路的位置刷新怪物
  - 避开入口/出口附近5x5区域
  - 确保普通怪物正常生成（测试显示60/60正常）
  
- ✅ **测试验证**
  - 通路占比：68.4%（足够的移动空间）
  - 入口和出口100%可通行
  - 怪物生成率：100%
  - 地图完全可用，战斗系统正常

### v1.3.0 (2026-01-04)
- ✅ **地图系统优化**
  - 修复地图入口位置确保可到达
  - 怪物和Boss只刷新在可到达的路径上
  - 使用A*寻路算法验证位置可达性
  - 优化怪物重新刷新机制
  
- ✅ **背包和仓库改进**
  - 显示可用空间信息（已使用/总容量）
  - 背包200格，仓库1000格
  - 实时更新空间使用情况
  
- ✅ **视野迷雾系统修复**
  - 未探索区域无法直接点击通行
  - 墙壁位置显示提示信息
  - 提升探索体验和安全性
  
- ✅ **技能面板优化**
  - 改进CSS样式确保内容完整显示
  - 区分已学习和未学习技能
  - 优化滚动和布局
  - 技能描述完整显示
  
- ✅ **装备系统完整实现**
  - 10个装备槽位（武器、头盔、衣服、腰带、鞋子、项链、左右戒指、左右手镯）
  - 装备界面显示所有装备槽
  - 综合属性面板（等级、生命、魔法、攻击、防御、幸运）
  - 装备属性加成系统
  - 品质系统影响装备属性
  
- ✅ **角色成长系统强化**
  - 升级经验需求指数增长
  - 不同职业获得不同属性加成
    - 战士：高生命、高防御、中攻击
    - 法师：高魔法、高攻击、低防御
    - 道士：平衡型成长
  - 每10级额外获得1点幸运值
  - 升级自动恢复满状态
  - 详细的升级信息反馈

### v1.2.0 (2026-01-03)
- ✅ 地图尺寸从12x12扩展到24x24
- ✅ 修复怪物刷新系统
- ✅ 实现多入口地图选择机制
- ✅ 完善技能系统（已学习标识、熟练度升级）
- ✅ 补充完整的怪物数据（25+种怪物）
- ✅ 补充完整的装备数据（武器、防具、饰品）
- ✅ 补充完整的技能数据（三职业共20+技能）
- ✅ 数据库迁移文件生成

## 开发说明

### 数据库迁移
执行新的迁移文件以更新数据库结构：
```bash
psql -h localhost -U mud_user -d mud_game < database/migrations/001_add_skill_proficiency.sql
```

### 添加新内容
1. **新怪物**: 编辑 `data/monsters/monsters.json`，添加 `damage_type` 字段
2. **新装备**: 编辑 `data/items/` 下对应文件，添加 `effects` 字段
3. **新技能**: 编辑 `data/skills/` 下对应职业文件
4. **新地图**: 编辑 `data/maps/maps.json`

### 添加新特效
1. 在 `backend/game/effects.py` 的 `get_equipment_effects` 方法中添加新特效键
2. 实现对应的计算方法
3. 在 `process_attack` 中调用新特效
4. 在装备JSON中使用新特效

## 技术特点

- 24x24动态迷宫生成
- 实时怪物刷新系统
- 多入口地图传送机制
- 技能熟练度渐进式升级
- 完整的游戏数据体系
- **模块化装备特效系统**
- **可配置的品质加成**

## 故障排除

### 怪物不刷新
- 确认服务器启动时spawner已启动
- 检查控制台是否有错误信息

### 地图入口不显示
- 确认 `data/maps/maps.json` 配置正确
- 检查地图实例是否正确加载

### 技能无法学习
- 确认等级是否满足要求
- 检查金币是否足够
- 确认该技能是否已学习

### 装备特效不生效
- 确认装备已正确穿戴
- 检查装备JSON中的 `effects` 字段格式
- 查看战斗日志确认特效触发

## 许可证

MIT License